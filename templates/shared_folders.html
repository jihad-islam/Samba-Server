<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shared Folder Files</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- DaisyUI Plugin -->
    <script>
      tailwind.config = {
        plugins: [require("daisyui")],
      };
    </script>

    <!-- Link to Shared Folder CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/shared_folder.css') }}"
    />
  </head>
  <body
    class="bg-gradient-to-r from-black via-gray-900 to-black text-gray-200 min-h-screen flex flex-col"
  >
    <!-- Banner Section with Colorful Glow Effect -->
    <div
      class="banner w-full bg-gradient-to-r from-gray-800 via-gray-900 to-black shadow-xl flex justify-between items-center px-6 py-4 glow-effect"
    >
      <!-- Left Section with Username -->
      <div class="text-lg font-medium text-white">
        Logged in as: <span class="text-blue-400">{{ username }}</span>
      </div>

      <!-- Title with Gradient and Animation -->
      <h2
        class="text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-yellow-500"
      >
        Samba Server
      </h2>

      <!-- Right Section with Icons -->
      <div class="flex items-center gap-4">
        <!-- Updated Upload Button -->
        <label
          for="uploadFile"
          class="p-3 bg-gradient-to-r from-purple-500 via-pink-500 to-yellow-500 hover:from-yellow-500 hover:to-purple-500 rounded-full shadow-md hover:shadow-lg transition transform hover:scale-105"
          title="Upload File"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-white"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M16 12l-4-4m0 0l-4 4m4-4v12"
            />
          </svg>
        </label>
        <input
          type="file"
          id="uploadFile"
          style="display: none"
          onchange="handleFileUpload(event)"
        />

        <!-- Logout Button -->
        <button
          id="logoutButton"
          class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition"
        >
          Logout
        </button>
      </div>
    </div>

    <!-- Shared Folder Files Section with Animated Glow -->
    <div class="container mx-auto mt-20">
      <div
        class="p-6 bg-gradient-to-r from-gray-800 to-gray-700 rounded-lg shadow-xl glow-effect"
      >
        <!-- <h1
          class="text-2xl font-semibold mb-4 text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-yellow-500 animate-pulse"
        >
          Files in the Shared Folder
        </h1> -->

        <!-- Upload Status Message -->
        <div id="uploadMessage" class="text-center mb-4"></div>

        <!-- File List -->
        <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {% if items %} {% for item in items %}
          <li
            class="bg-black bg-opacity-60 p-4 rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition transform flex items-center justify-between"
          >
            <!-- Icon and File/Folder Name -->
            <div class="flex items-center gap-4">
              <img
                src="{{ url_for('static', filename='icons/folder.png') if item.type == 'folder' else url_for('static', filename='icons/file.png') }}"
                alt="{{ item.type }} icon"
                class="h-10 w-10"
              />
              <span class="text-lg font-medium truncate text-white"
                >{{ item.name }}</span
              >
            </div>

            {% if item.type == 'file' %}
            <!-- Modern Download Button -->
            <button
              onclick="handleDownload('{{ item.name }}')"
              class="p-2 bg-gradient-to-r from-purple-500 via-pink-500 to-yellow-500 hover:from-yellow-500 hover:to-purple-500 rounded-full transition"
              title="Download File"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 text-white"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 16v-8m0 8l-4-4m4 4l4-4m-7 8h10a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2z"
                />
              </svg>
            </button>
            {% endif %}
          </li>
          {% endfor %} {% else %}
          <p class="text-center text-yellow-400">
            {{ message or "No files found in the shared folder." }}
          </p>
          {% endif %}
        </ul>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
  </body>
</html>
